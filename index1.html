<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Chewy&family=Lexend:wght@100..900&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overdrafts: Level 1</title>
    <link rel="stylesheet" href="static/main.css">
    <style>
        div.poundcoin{
            background-image: url("static/pound.png");
            width:75px;
            height:75px;
            position:relative;
            background-size:cover;
            transition: opacity 0.5s ease;
            }
        div.poundcoin.grey{
          filter: grayscale(100%);
          opacity: 0.3;
        }
        .poundcoin.live {
          filter: none;
          opacity: 1;
        }
        .poundcoin.draggable{
            justify-self: center;
            cursor: grab;
        }
        @keyframes fly-to-ania {
          0% {
            transform: translate(0, 0) scale(1);
            opacity: 1;
          }
          100% {
            transform: translate(300px, -20px) scale(0.8);
            opacity: 0;
          }
        }

        .poundcoin.fly {
          animation: fly-to-ania 0.6s ease-in forwards;
          pointer-events: none;
        }

    </style>
</head>
<body>
    <audio id="chime-sound" src="static/chime.mp3" preload="auto"></audio>
    <div class="section" id="recap">
        <div class="scalable">
        <div class="text-line title">Recap: Before you start</div><br/><div class="text-line">This is the first lesson about <strong>overdrafts</strong>.<br/><br/>To think about overdrafts, we need to know what it means to <strong>lend</strong> or <strong>borrow</strong> money, and especially what it means if you borrow money from a bank.</div>
        <button class="scroll-btn" onclick="scrollToSection('landing')">OK</button>
        </div>
    </div>
    <div class="section timeline-anchor" id="landing" data-title="Landing page">
        <div class="scalable">
        <div class="text-line title">Overdrafts: Level 1</div><div class="text-line fade-in">We're going to look at the words 'borrow', 'lend' and 'owe', and think about what it means to borrow or lend money.<br/></div><br/>
        <button class="scroll-btn" onclick="scrollToSection('recap')">Recap</button>
        <button  id="first-continue" class="scroll-btn">Let's go!</button><!--special case because the first click is caught by a global handler-->
        </div>
    </div>
    <div class="section timeline-anchor" id="screen2" data-title="Ania wants to borrow a bike">
        <div class="scalable">
        <div class="video-container">
        <video class="frameless-video" playsinline>
        <source src="videos/borrow1.mp4" type="video/mp4">
        </video>
    </div><br/><br/><br/>
        <div class="fade-in-delayed" style="--fade-delay: 5000ms;justify-items:center"><div class="text-line centerer">Would you lend Ania your bike?</div><div class="centerer"><button class="scroll-btn" onclick="scrollToSection('borrow2')">Yes, of course</button><button class="scroll-btn" onclick="scrollToSection('borrow2')">I'm not sure</button></div></div>
    </div>
</div>
    <div class="section timeline-anchor" id="borrow2" data-title="Darek lends his bike">
        <div class="scalable">
        <div class="video-container">
        <video class="frameless-video" playsinline>
        <source src="videos/borrow2.mp4" type="video/mp4">
        </video>
    </div><br/><br/><br/>
        <div class="fade-in-delayed" style="--fade-delay: 5000ms;justify-items:center"><div class="text-line centerer">Is Darek offering Ania a fair deal?</div>
        <div class="centerer"><button class="scroll-btn" onclick="scrollToSection('borrow3')">Yes, he deserves something</button><button class="scroll-btn" onclick="scrollToSection('borrow3')">No, why should Ania get him anything?</button></div>
    </div>
    </div>
</div>
    <div class="section timeline-anchor" id="borrow3" data-title="Kiran owes Ania money">
        <div class="scalable">

        <div class="video-container">
        <video class="frameless-video" playsinline>
        <source src="videos/borrow3.mp4" type="video/mp4">
        </video>
    </div><br/><br/><br/>
        <button class="scroll-btn fade-in-delayed" style="--fade-delay: 5000ms" onclick="scrollToSection('question1')">Go on</button>
    </div>
</div>
    <div class="section timeline-anchor" id="question1"  data-title="Why does Kiran owe money?">
        <div class="scalable">
        <div class="pocket-image centre-left">
            <div class="image-frame" style="background-image: url('static/kiran.png');"></div>
            <div class="caption">Kiran</div>
        </div>
        <div class="pocket-image centre-right">
            <div class="image-frame" style="background-image: url('static/ania.png');"></div>
            <div class="caption">Ania</div>
        </div>
        <div class="text-line fade-in">Why does Kiran owe Ania money?</div>
        <br/>
        <button class="answer-btn" onclick="checkAnswer(this, 'question2',true)">Ania bought Kiran a cinema ticket</button>
        <button class="answer-btn" onclick="checkAnswer(this, 'retry',false)">Kiran bought Ania a cinema ticket</button>
        <button class="answer-btn" onclick="checkAnswer(this, 'retry',false)">Ania stole Kiran's pocket money</button>
</div>
</div>
    <div class="section timeline-anchor" id="question2"  data-title="Paying some back">
        <div class="scalable">
        <div class="text-line fade-in">The cinema ticket cost £8.00. Kiran has paid back £5.00 to Ania. How much does she still owe?</div>
        <br/>
        <div style="display: flex; gap: 1em;">
        <button class="answer-btn" onclick="checkAnswer(this, 'feedback2',false)">£8.00</button>
        <button class="answer-btn" onclick="checkAnswer(this, 'payback_teaching',true)">£3.00</button>
        <button class="answer-btn" onclick="checkAnswer(this, 'feedback2',false)">£5.00</button>
    </div>
</div>
</div>
<div class="section" id="feedback2">
    <div class="scalable">
    <div class="text-line fade-in">Kiran owed Ania £8, and then she paid back £5.<br/>£8.00 – £5.00 = £3.00<br/><br/>So Kiran still owes Ania £3.00.<br/><br/>
    </div>
    <div>
        <table class="interest-table fade-in nogaps noweeks" style=" max-width:80%;font-size: 1em;">
            <thead><td class="blue" colspan="2">£8.00 owed</td></thead>
            <tbody>    
              <tr>
                <td class="blue" style="width:37.5%">£3.00 owed</td>
                <td class="orange" style="width:62.5%">£5.00 paid back</td>
              </tr>
          </tbody>
        </table>
    </div>
<br/><button class="scroll-btn fade-in" onclick="scrollToSection('question2')">OK, I'll try again</button>
</div>
</div>
<div class="section timeline-anchor" id="payback_teaching" data-title="Paying back over time">
    <div class="scalable top">
        <div>
    <div class="text-line">We know that Kiran still owes Ania £3.<br/>
If she gives Ania £1 every week, it will take her 3 weeks to pay her back.<br/><br/>Drag or click the coins from Kiran to Ania.</div>
<br/><br/>
</div>
<div style="width:50%">
        <table class="interest-table nogaps" style="font-size: 0.5em;">
            <thead><td class="week-label"></td><td class="blue" colspan="4"><strong>£3.00 owed</strong></td></thead>
            <tbody>    
              <tr id="coindrag_week1" class="hidden">
                <td class="week-label">Week 1</td>
                <td class="orange" colspan="1" style="width:25%;">£1.00 paid back</td>
                <td class="blue" colspan="2" style="width:50%">£2.00 owed</td>
                
              </tr>
              <tr id="coindrag_week2" class="hidden">
                <td class="week-label">Week 2</td>
                <td class="orange" colspan="2">£2.00 paid back</td>
                <td class="blue" colspan="1" style="width:25%">£1.00 owed</td>
                
              </tr>
              <tr id="coindrag_week3" class="hidden">
                <td class="week-label">Week 3</td>
                <td class="orange" colspan="3">£3.00 paid back</td>
              </tr>
          </tbody>
        </table>
    </div>
<br/><button id="coindrag_nextButton" class="scroll-btn hidden" onclick="scrollToSection('question3')">Next</button>
<div style="display: flex; gap: 1em;">
    <div class="pocket-image bottom-left character-kiran">
            <div class="image-frame" style="background-image: url('static/kiran.png');"></div>
            <div class="caption">Kiran</div>
            <div id="draggable-coin" class="poundcoin draggable" draggable="true"></div>
        </div>
    </div>
        <div class="pocket-image bottom-right character-ania">
            <div class="image-frame" style="background-image: url('static/ania.png');"></div>
            <div class="caption">Ania</div>
            <div style="display: flex; gap: 1em;">
                <div class="poundcoin grey" data-index="0"></div>
                <div class="poundcoin grey" data-index="1"></div>
                <div class="poundcoin grey" data-index="2"></div>
            </div>
        </div>
</div>
    <div class="section timeline-anchor" id="question3" data-title="paying back calculation">
        <div class="scalable">
        <div class="text-line fade-in">You borrow £10 from a friend and pay them back £2 every week. How long will it take you to pay them back?</div></br>
        <div style="display: flex; gap: 1em;">
        <button class="answer-btn" onclick="checkAnswer(this, 'summative1',true)">5 weeks</button>
        <button class="answer-btn" onclick="checkAnswer(this, 'feedback3',false)">10 weeks</button>
        <button class="answer-btn" onclick="checkAnswer(this, 'feedback3',false)">20 weeks</button>
    </div>
    </div>
</div>
</div>
    <div class="section" id="feedback3">
        <div class="scalable">
    <div class="text-line fade-in">You borrowed £10. In the first week, you pay back £2, and you still owe £8.<br/><br/>Look at how this changes over time as you keep paying back £2 each week.</div>
<br/><br/>
        <table class="interest-table fade-in nogaps" style="font-size: 0.5em;">
            <thead><td class="week-label"></td><td class="blue" colspan="5"><strong>£10.00 owed</strong></td></thead>
            <tbody>    
              <tr>
                <td class="week-label">Week 1</td>
                <td class="orange" colspan="1" style="width:16%;">£2.00 paid back</td>
                <td class="blue" colspan="4" style="width:68%">£8.00 owed</td>
              </tr>
              <tr>
                <td class="week-label">Week 2</td>
                <td class="orange" colspan="2">£4.00 paid back</td>
                <td class="blue" colspan="3" style="width:52%">£6.00 owed</td>
                
              </tr>
              <tr>
                <td class="week-label">Week 3</td>
                <td class="orange" colspan="3">£6.00 paid back</td>
                <td class="blue" colspan="2" style="width:36%">£4.00 owed</td>
                
              </tr>
              <tr>
                <td class="week-label">Week 4</td>
                <td class="orange" colspan="4">£8.00 paid back</td>
                <td class="blue" colspan="1" style="width:20%">£2.00 owed</td>
                
              </tr>
              <tr>
                <td class="week-label">Week 5</td>
                <td class="orange" colspan="5" ><strong>£10.00 paid back!</strong></td>
              </tr>
          </tbody>
        </table>
<br/><button class="scroll-btn fade-in" onclick="scrollToSection('question3')">OK, I'll try again</button>
</div>
</div>
<div class="section timeline-anchor" id="summative1"  data-title="Question 1">
       
        <div class="parallax-bg" style="background-image: url('static/smoothies.jpg');"></div>
        <div class="scalable">
        <div class="pocket-image upper-left">
            <div class="image-frame" style="background-image: url('static/kiran.png');"></div>
            <div class="caption">Kiran</div>
        </div>
        <div class="pocket-image upper-right">
            <div class="image-frame" style="background-image: url('static/ania.png');"></div>
            <div class="caption">Ania</div>
        </div>
        <div class="content-overlay centre">
        <div class="text-line fade-in">Ania forgets her purse when she and Kiran go out. Kiran buys Ania a smoothie and a snack, which costs £6.00 in total.<br/><br/>Ania has…
</div>
        <button class="answer-btn" onclick="checkAnswer(this, 'retry',false)">lent £6.00 to Kiran</button>
        <button class="answer-btn" onclick="checkAnswer(this, 'summative2',true)">borrowed £6.00 from Kiran</button>
    </div>
</div>
</div>
<div class="section timeline-anchor" id="summative2"  data-title="Question 2">
        <div class="parallax-bg" style="background-image: url('static/smoothies.jpg');"></div>
        <div class="scalable">
        <div class="content-overlay right">
        <div class="text-line fade-in">Ania borrowed £6.00 from Kiran. The next day, Ania pays Kiran back £5.00. How much does she still owe?
</div>
        <button class="answer-btn" onclick="checkAnswer(this, 'summative3',true)">£1.00</button>
        <button class="answer-btn" onclick="checkAnswer(this, 'retry',false)">£2.00</button>
        <button class="answer-btn" onclick="checkAnswer(this, 'retry',false)">£3.00</button>
    </div>
</div>
</div>
<div class="section timeline-anchor" id="summative3"  data-title="Question 3">
        <div class="parallax-bg" style="background-image: url('static/smoothies.jpg');"></div>
        <div class="scalable">
        <div class="content-overlay">
        <div class="text-line fade-in">You borrow £35 from a friend and pay them back £5 every week. How long will it take you to pay them back?
</div>
        <button class="answer-btn" onclick="checkAnswer(this, 'retry',false)">5 weeks</button>
        <button class="answer-btn" onclick="checkAnswer(this, 'end',true)">7 weeks</button>
        <button class="answer-btn" onclick="checkAnswer(this, 'retry',false)">10 weeks</button>
    </div>
</div>
</div>
    <div class="section timeline-anchor" id="end" data-title="Summary">
        <div class="scalable">
        <div class="text-line title">In this lesson:</div>
        <div class="text-line"><ul>
<li>Ania’s brother Darek lent her his bike. To pay him back, she agreed to pump up the tyres and buy him a chocolate bar.</li>
<li>Kiran borrowed money from Ania for a cinema ticket, and paid her back some of the money.</li>
<li>You learnt about how long it takes to pay someone back if you pay them a little bit each week.</li></ul>
</div>
        <div><button class="reload-btn fade-in-delayed" onclick="location.reload()">↺</button></div>
    </div>
</div>
    <div id="timeline">
      <div id="timeline-up" class="timeline-arrow">&#9650;</div>
      <div id="timeline-dots"></div> <!-- ⬅️ dots will go here -->
      <div id="timeline-down" class="timeline-arrow">&#9660;</div>
    </div>
    <script src="scripts/main.js"></script>
    <script>
document.addEventListener('DOMContentLoaded', () => {
    const kiran = document.querySelector('.character-kiran');
const ania = document.querySelector('.character-ania');

function deliverCoin() {
  if (delivered < aniaCoins.length) {
    // Trigger fly animation
    draggableCoin.classList.add('fly');

    setTimeout(() => {
      // Reset position
      draggableCoin.classList.remove('fly');

      // Reveal next Ania coin
      const coin = aniaCoins[delivered];
      coin.classList.remove('grey');
      coin.classList.add('live');
      updateVisibleItems(++delivered);
    }, 600); // match the duration of the fly animation
  }
}

kiran.addEventListener('click', deliverCoin);
ania.addEventListener('click', deliverCoin);

  const draggableCoin = document.getElementById('draggable-coin');
  const aniaCoins = document.querySelectorAll('.bottom-right .poundcoin.grey');
  let delivered = 0;

  // Setup drag
  draggableCoin.addEventListener('dragstart', (e) => {
    e.dataTransfer.setData('text/plain', 'coin');
    setTimeout(() => {
      draggableCoin.style.opacity = '0'; // fade out while dragging
    }, 0);
  });

  draggableCoin.addEventListener('dragend', () => {
    draggableCoin.style.opacity = '1'; // fade back if not dropped
  });

  const dropTarget = document.querySelector('.bottom-right');
  dropTarget.addEventListener('dragover', (e) => {
    e.preventDefault(); // allow drop
  });

  dropTarget.addEventListener('drop', (e) => {
    e.preventDefault();

    if (delivered < aniaCoins.length) {
      const coin = aniaCoins[delivered];
      coin.classList.remove('grey');
      coin.classList.add('live');

      // Animate coin reset
      draggableCoin.style.opacity = '0';
      setTimeout(() => {
        draggableCoin.style.opacity = '1';
      }, 300);

      updateVisibleItems(++delivered);
      
    }
  });
  function updateVisibleItems(delivered){
    document.getElementById(`coindrag_week${delivered}`).classList.remove("hidden");
      if (delivered === 3) {
        draggableCoin.style.display = 'none';
        document.getElementById(`coindrag_nextButton`).classList.remove("hidden");

      }
  }
});
    document.addEventListener("DOMContentLoaded", () => {
        scrollToSection("landing");
});
    </script>
</body>
</html>
